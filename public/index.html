<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SkyIQ | AI Voice Solutions</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="main-content">
        <div class="header">
            <div class="header-left">
                <div class="logo">
                    <div class="logo-icon"></div>
                    <div class="logo-text">SkyIQ</div>
                </div>
                <div class="header-title">AI Voice Dashboard</div>
            </div>
            <div class="user-profile">
                <div class="profile-avatar">SQ</div>
            </div>
        </div>

        <div class="content-area">
            <div class="connection-status">
                <div class="status-dot"></div>
                <span id="connectionStatus">Connected</span>
            </div>

            <!-- Stats Section -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="totalCalls">0</div>
                    <div class="stat-label">Total Calls</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="inboundCalls">0</div>
                    <div class="stat-label">Inbound Calls</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="outboundCalls">0</div>
                    <div class="stat-label">Outbound Calls</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="lastUpdate">Never</div>
                    <div class="stat-label">Last Update</div>
                </div>
            </div>

            <!-- Make Call Section -->
            <div class="section-card">
                <div class="section-header">
                    <div class="section-title">
                        <span class="section-icon">üìû</span>
                        Make Call
                    </div>
                    <div class="section-subtitle">Make individual calls directly from your dashboard</div>
                </div>
                <div class="section-content">
                    <div class="phone-input-group">
                        <input 
                            type="tel" 
                            id="phoneInput" 
                            class="phone-input" 
                            placeholder="Enter phone number (e.g., +1-555-123-4567)"
                            maxlength="20"
                        >
                        <button id="callButton" class="call-btn" onclick="initiateCall()">
                            <span class="btn-icon">üìû</span>
                            Start Call
                        </button>
                    </div>
                    <div id="callStatus" class="call-status"></div>
                </div>
            </div>

            <!-- AI Agent Configuration -->
            <div class="section-card">
                <div class="section-header">
                    <div class="section-title">
                        <span class="section-icon">ü§ñ</span>
                        AI Agent Configuration
                    </div>
                    <div class="section-subtitle">Customize your AI agent's behavior and knowledge</div>
                </div>
                <div class="section-content">
                    <div class="tabs-container">
                        <div class="tabs">
                            <button class="tab active" onclick="switchTab('prompt-tab', this)">
                                <span class="tab-icon">‚úèÔ∏è</span>
                                Prompt Editor
                            </button>
                            <button class="tab" onclick="switchTab('knowledge-tab', this)">
                                <span class="tab-icon">üìö</span>
                                Knowledge Base
                            </button>
                            <button class="tab" onclick="switchTab('settings-tab', this)">
                                <span class="tab-icon">‚öôÔ∏è</span>
                                Settings
                            </button>
                        </div>

                        <!-- Prompt Editor Tab -->
                        <div id="prompt-tab" class="tab-content active">
                            <div class="section-subtitle" style="margin-bottom: 16px;">
                                Write your AI agent's instructions. The system will automatically detect and extract the greeting.
                            </div>
                            
                            <textarea 
                                id="promptEditor" 
                                class="prompt-editor"
                                placeholder='Write your AI agent instructions here. For example:

You are Sarah, a customer service representative for Acme Corp. Always be helpful and professional.

Hello! This is Sarah from Acme Corp. How can I help you today?

- Be patient with customers
- Listen to their concerns  
- Provide clear solutions
- End calls on a positive note

The system will automatically find "Hello! This is Sarah..." and use it as the greeting.'
                            ></textarea>
                            
                            <div class="prompt-actions">
                                <button id="savePromptBtn" class="btn" onclick="savePrompt()">
                                    <span class="btn-icon">üíæ</span>
                                    Save Prompt
                                </button>
                                <button class="btn secondary" onclick="loadCurrentPrompt()">
                                    <span class="btn-icon">üîÑ</span>
                                    Reload Current
                                </button>
                                <button class="btn secondary" onclick="clearPrompt()">
                                    <span class="btn-icon">üóëÔ∏è</span>
                                    Clear
                                </button>
                            </div>
                            
                            <div id="promptStatus" class="prompt-status"></div>
                        </div>

                        <!-- Knowledge Base Tab -->
                        <div id="knowledge-tab" class="tab-content">
                            <div class="section-subtitle" style="margin-bottom: 16px;">
                                View and manage scraped website data and processed documents that enhance your AI agent's knowledge
                            </div>
                            
                            <div id="knowledgeBaseContent">
                                <div class="empty-state">
                                    <div class="empty-icon">üìö</div>
                                    <div class="empty-title">No Knowledge Data</div>
                                    <div class="empty-subtitle">Feature coming soon: Upload documents and scrape websites to enhance your agent's capabilities</div>
                                </div>
                            </div>
                            
                            <div class="prompt-actions">
                                <button class="btn secondary" onclick="exportKnowledgeBase()">
                                    <span class="btn-icon">üì•</span>
                                    Export Data
                                </button>
                                <button class="btn secondary" onclick="clearKnowledgeBase()">
                                    <span class="btn-icon">üóëÔ∏è</span>
                                    Clear All Data
                                </button>
                            </div>
                        </div>

                        <!-- Settings Tab -->
                        <div id="settings-tab" class="tab-content">
                            <div class="section-subtitle" style="margin-bottom: 16px;">
                                Configure your AI agent's behavior and response settings
                            </div>
                            
                            <div class="settings-grid">
                                <div class="setting-group">
                                    <label class="setting-label">Response Speed</label>
                                    <select id="responseSpeed" class="setting-input">
                                        <option value="fast">Fast (Quick responses)</option>
                                        <option value="balanced" selected>Balanced (Default)</option>
                                        <option value="thoughtful">Thoughtful (More detailed)</option>
                                    </select>
                                </div>
                                
                                <div class="setting-group">
                                    <label class="setting-label">Conversation Style</label>
                                    <select id="conversationStyle" class="setting-input">
                                        <option value="professional">Professional</option>
                                        <option value="friendly" selected>Friendly</option>
                                        <option value="casual">Casual</option>
                                        <option value="formal">Formal</option>
                                    </select>
                                </div>
                                
                                <div class="setting-group">
                                    <label class="setting-label">Auto-Update Knowledge</label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="autoUpdateKnowledge" checked>
                                        <span class="checkbox-custom"></span>
                                        <span>Automatically include new scraped data in agent prompts</span>
                                    </label>
                                </div>
                                
                                <div class="setting-group">
                                    <label class="setting-label">Max Knowledge Length</label>
                                    <input 
                                        type="range" 
                                        id="maxKnowledgeLength" 
                                        min="1000" 
                                        max="10000" 
                                        value="5000"
                                        class="slider"
                                    >
                                    <div class="slider-labels">
                                        <span>1K characters</span>
                                        <span id="knowledgeLengthValue">5K characters</span>
                                        <span>10K characters</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="prompt-actions">
                                <button class="btn" onclick="saveSettings()">
                                    <span class="btn-icon">üíæ</span>
                                    Save Settings
                                </button>
                                <button class="btn secondary" onclick="resetSettings()">
                                    <span class="btn-icon">üîÑ</span>
                                    Reset to Default
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls">
                <button class="btn" onclick="refreshData()">
                    <span class="btn-icon">üîÑ</span>
                    Refresh Data
                </button>
                <button class="btn secondary" onclick="viewAllCalls()">
                    <span class="btn-icon">üìã</span>
                    View All Calls
                </button>
                <button class="btn secondary" onclick="testCall()">
                    <span class="btn-icon">üß™</span>
                    Test Call
                </button>
            </div>

            <!-- Recent Call Log -->
            <div class="section-card">
                <div class="section-header">
                    <div class="section-title">
                        <span class="section-icon">üìû</span>
                        Recent Calls
                    </div>
                    <div class="section-subtitle">Latest conversation activity</div>
                </div>
                
                <div id="callHistory">
                    <div class="empty-state">
                        <div class="empty-icon">üìû</div>
                        <div class="empty-title">Loading calls...</div>
                        <div class="empty-subtitle">Your call data will appear here</div>
                        <div class="webhook-url" id="webhookUrl">Webhook: /webhook</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Transcript Modal -->
    <div id="transcriptModal" class="transcript-modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title" id="modalTitle">Call Transcript</div>
                <button class="close-btn" onclick="closeTranscriptModal()">&times;</button>
            </div>
            <div class="transcript-content" id="modalTranscript">
                No transcript available
            </div>
        </div>
    </div>

    <!-- Notification -->
    <div id="notification" class="notification">
        New call received
    </div>

    <script src="script.js"></script>
</body>
</html>
